<!doctype html>
<html>

<head>
    <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase.js"></script>
    <script>
    var config = {
        apiKey: "AIzaSyAdhmE_VvXS83MvrZYtRmLLVvQDRJw4k2E",
        authDomain: "cse134bprojmememaster.firebaseapp.com",
        databaseURL: "https://cse134bprojmememaster.firebaseio.com",
        projectId: "cse134bprojmememaster",
        storageBucket: "cse134bprojmememaster.appspot.com",
        messagingSenderId: "108809510486"
    };
    firebase.initializeApp(config);
    </script>
    <script src="memeGenerationJS.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <style>
        body{ background-color: ivory; }
    canvas{border:1px solid red;}
    #wrapTemplates{
    height: 100px;
    overflow: scroll;
    overflow-y: hidden;
    white-space: nowrap;
    
}
#wrapTemplates .im{
    display: inline-block;
}

.im > .templateMeme {
    width: 50px;
    height: 50px;
    border-right: 3px solid #fff;
    cursor: pointer
}
</style>

<body>
    Title of meme: <input type="text" id="titleText"><br>
    Top text:<input type="text" id="topText"><br>
    Bottom text:<input type="text" id="botText"><br>
    Upload a file: <input id="upload" type="file" accept="image/*">
    <h2> Or select from one of our templates </h1>
    <div id="wrapTemplates">
        <div class ="im">
            <img id='pikaMeme' class = "templateMeme" src="pikawat.jpg">
        </div>
        <div class ="im">
            <img id= "safeMeme" class = "templateMeme" src ="safe.jpg">
        </div>
        <div class ="im">
            <img id= "distractedBoyMeme" class = "templateMeme" src ="Distracted Boyfriend.JPG">
        </div>
        <div class ="im">
            <img id= "FWPMeme" class = "templateMeme" src ="1990s-First-World-Problems.jpg">
        </div>
        <div class ="im">
            <img id= "AliensMeme" class = "templateMeme" src ="Ancient-Aliens.jpg">
        </div>
        <div class ="im">
            <img id= "BatmanRobinMeme" class = "templateMeme" src ="Batman-Slapping-Robin.jpg">
        </div>
        <div class ="im">
            <img id= "BlackGirlWatMeme" class = "templateMeme" src ="Black-Girl-Wat.jpg">
        </div>
        <div class ="im">
            <img id= "BlueButtonMeme" class = "templateMeme" src ="BlueButton.JPG">
        </div>
        <div class ="im">
            <img id= "NotMyBusinessMeme" class = "templateMeme" src ="But-Thats-None-Of-My-Business.jpg">
        </div>
        <div class ="im">
            <img id= "bubblesGirlMeme" class = "templateMeme" src ="Chubby-Bubbles-Girl.jpg">
        </div>
        <div class ="im">
            <img id= "conspiracyKeanuMeme" class = "templateMeme" src ="Conspiracy-Keanu.jpg">
        </div>
        <div class ="im">
            <img id= "creepyWonkaMeme" class = "templateMeme" src ="Creepy-Condescending-Wonka.jpg">
        </div>
        <div class ="im">
            <img id= "dogeMeme" class = "templateMeme" src ="Doge.jpg">
        </div>
        <div class ="im">
            <img id= "futuramaMeme" class = "templateMeme" src ="Futurama-Fry.jpg">
        </div>
        <div class ="im">
            <img id= "grumpyCatMeme" class = "templateMeme" src ="Grumpy-Cat.jpg">
        </div>
        <div class ="im">
            <img id= "pillsMeme" class = "templateMeme" src ="Hard-To-Swallow-Pills.jpg">
        </div>
        <div class ="im">
            <img id= "johnnyMeme" class = "templateMeme" src ="Heres-Johnny.jpg">
        </div>
        <div class ="im">
            <img id= "haroldMeme" class = "templateMeme" src ="Hide-the-Pain-Harold.jpg">
        </div>
        <div class ="im">
            <img id= "asianDadMeme" class = "templateMeme" src ="High-Expectations-Asian-Father.jpg">
        </div>
        <div class ="im">
            <img id= "liveDangerouslyMeme" class = "templateMeme" src ="I-Too-Like-To-Live-Dangerously.jpg">
        </div>
        <div class ="im">
            <img id= "interestingManMeme" class = "templateMeme" src ="InterestingMan.jpg">
        </div>
        <div class ="im">
            <img id= "pigeonMeme" class = "templateMeme" src ="Is-This-A-Pigeon.jpg">
        </div>
        <div class ="im">
            <img id= "jackieChanMeme" class = "templateMeme" src ="Jackie-Chan-WTF.jpg">
        </div>
        <div class ="im">
            <img id= "leoDicaprioMeme" class = "templateMeme" src ="LeoDicaprioCheers.jpg">
        </div>
        <div class ="im">
            <img id= "mockingSpongebobMeme" class = "templateMeme" src ="Mocking SpongeBob.JPG">
        </div>
        <div class ="im">
            <img id= "offRampMeme" class = "templateMeme" src ="OffRamp.jpg">
        </div>
        <div class ="im">
            <img id= "notSimplyMeme" class = "templateMeme" src ="One-Does-Not-Simply.jpg">
        </div>
        <div class ="im">
            <img id= "oprahMeme" class = "templateMeme" src ="Oprah-You-Get-A.jpg">
        </div>
        <div class ="im">
            <img id= "philosoraptorMeme" class = "templateMeme" src ="Philosoraptor.jpg">
        </div>
        <div class ="im">
            <img id= "successKidMeme" class = "templateMeme" src ="Success-Kid.jpg">
        </div>
        <div class ="im">
            <img id= "twoButtonsMeme" class = "templateMeme" src ="Two-Buttons.jpg">
        </div>
        <div class ="im">
            <img id= "teacherMeme" class = "templateMeme" src ="Unhelpful-High-School-Teacher.jpg">
        </div>
        <div class ="im">
            <img id= "skeletonMeme" class = "templateMeme" src ="Waiting-Skeleton.jpg">
        </div>
        <div class ="im">
            <img id= "xAllYMeme" class = "templateMeme" src ="X-All-The-Y.jpg">
        </div>

    </div>
    Upload via URL: <input id='urlUp', type='text'> <button id='upBut', type='button', onclick='replaceUrl()'>Upload</button>
    <hr>

    <canvas id="canvas"/>
    <img id="test"/>

    <script>
        function replaceUrl(){
            var URLval = document.getElementById('urlUp').value;
            console.log(URLval);
            document.getElementById('test').src = URLval;
        }
        const fileInput = document.getElementById('upload');
        var selectedFile = fileInput.files[0];
        /*if(selectedFile != null){
           console.log('selectedFileExists....');
          var test = selectedFile.imageURL;
          document.getElementById("test").src = test;

        }
        else{
            console.log('selectedFile is null....');
        }*/

        fileInput.addEventListener('change', (e) => doSomethingWithFiles(e.target.files));

         /*fileInput.addEventListener('change', sendPic, false);*/

        var output = document.getElementById('test');

        function doSomethingWithFiles(fileList) {
            file = null;

            for (let i = 0; i < fileList.length; i++) {
                if (fileList[i].type.match(/^image\//)) {
                    file = fileList[i];
                     break;
                    }
            }

            if (file !== null) {
                isFileNull=false;
                output.src = URL.createObjectURL(file);                      
                document.getElementById("test").src = output.src;
                                
                                
                                

            console.log("FILE URL IS: "+ output.src);
                /* var ref = firebase.storage().ref('/memeTemplates');
                var childRef = ref.child(output.src);
                childRef.put(file).then(function(snapshot){
                console.log('uploaded a file!');
                });*/

            }
        }

        /*function uploadFile(){
        var storageRef = firebase.storage().ref('/memeTemplates');
        $("#cameraFile").on("change", function(event){
        file = event.target.files[0]; });
         var filename = file.name;


                        
        }*/

                        

        function alertSuccessfulFileUpload(){
            alert("successfully uploaded image!");
        }
        function checkIfFileIsNull(){
            if(file == null){
                isFileNull= true;
                alert("No image selected: please select an image to upload!");
            }
            else{
                // uploadFile();

            }
                            
        }  

    </script>
    
</body>
<script>

</script>
</head>
</html>