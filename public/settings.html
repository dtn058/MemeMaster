<!doctype html>
<html>

<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <link href="settingsCSS.css" rel="stylesheet" type="text/css">
</head>

<body>
    <h1 class ="text"> <b> Configuration Settings </b> </h1>
    <div class="avatar">
        <img class="avatarpic" src="pikawat.jpg" alt="Avatar">
    </div>
        <div class="buttonWrap">
            <button id="open-modal" class="button buttonRed"> Change Password </button>
        </div>
        <div class="buttonWrap">
            <button class="button buttonBlack"> Logout </button>
        </div>
        <!-- modal stuff-->
        <dialog id="pass-modal">
            <h3 class="modal-header">Change Password</h3>
            <div class="modal-body">
                New Password: <input id="newPass" type="text">
            </div>
            <footer class="modal-footer">
                <button id="cancelled-it" type="button">Cancel</button>
                <button id="confirmed-it" type="button">Confirm</button>
            </footer>
            <button id="close" class="close" type="button">&times;</button>
        </dialog>
        <p><code>returnValue</code>: <span id="return-value"></span></p>
        <script>
        const modal = document.getElementById('pass-modal');
        const open = document.getElementById('open-modal');
        const close = document.getElementById('close');
        const cancelledIt = document.getElementById('cancelled-it');
        const confirmedIt = document.getElementById('confirmed-it');
        const returnSpan = document.getElementById('return-value');

        open.addEventListener('click', () => {
            modal.showModal();
        });

        cancelledIt.addEventListener('click', () => {
            modal.close('cancelled');
        });

        // returns the user's new pass when click "confirm"
        confirmedIt.addEventListener('click', () => {
            modal.close(document.getElementById('newPass').value);
        });

        close.addEventListener('click', () => {
            modal.close('cancelled');
        })

        modal.addEventListener('cancel', () => {
            modal.close('cancelled');
        });

        // close when clicking on backdrop
        modal.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.close('cancelled');
            }
        });

        // display returnValue
        modal.addEventListener('close', () => {
            returnSpan.innerHTML = modal.returnValue;
        });
        </script>
</body>

</html>